#
# ~/.environment
#
# vim: set filetype=bash
#
export EDITOR="nvim"
export BROWSER="qutebrowser"

# PATHS ####################################
# PATH
export PATH="$PATH:$HOME/.local/bin"
export PATH=$(printf %s "$PATH" | awk -vRS=: '!a[$0]++' | paste -s -d:)

# PYTHONPATH
export PYTHONPATH="/usr/bin/python:$PYTHONPATH"
export PYTHONPATH=$(printf %s "$PYTHONPATH" | awk -vRS=: '!a[$0]++' | paste -s -d:)

export PYTHON_HISTORY="$XDG_STATE_HOME/python/history"
export PYTHONPYCACHEPREFIX="$XDG_CACHE_HOME/python"
export PYTHONUSERBASE="$XDG_DATA_HOME/python"

export RUSTUP_HOME="$XDG_DATA_HOME/rustup"
# remove duplicates (if I reload .profile for some reason :)
####################################################
export CHEZMOI="$(chezmoi source-path)"
export LOCALDATA="$HOME/.localdata"
export SCRIPTS="$HOME/.scripts"
export D="$HOME/Desktop"

export PASSWORD_STORE_DIR="$LOCALDATA/password-store"
export PASSWORD_STORE_KEY="$LOCALDATA/password-store/.gpg-id"
#PASSWORD_STORE_GPG_OPTS
export CHEZMOI=$(chezmoi source-path)
export LOCALDATA="$HOME/.localdata"
export SCRIPTS="$HOME/.scripts/"
#####################################################

# FREEDESKTOP
export XDG_DATA_HOME=$HOME/.local/share
export XDG_CONFIG_HOME=$HOME/.config
export XDG_STATE_HOME=$HOME/.local/state
export XDG_CACHE_HOME=$HOME/.cache
export XDG_DATA_DIRS=/usr/local/share/:/usr/share/
export XDG_CONFIG_DIRS=/etc/xdg/

# MAKE VIM XDG COMPLIANT
mkdir -p ~/.config/vim
mkdir -p ~/.local/share/vim
mkdir -p ~/.local/state/vim
export VIM_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}/vim"

# THEME
#qt
export QT_QPA_PLATFORMTHEME=qt6ct

export FZF_DEFAULT_OPTS="
    --color=fg:#878580,bg:#100F0F,hl:#879a39
    --color=fg+:#fffcf0,bg+:#1C1B1A,hl+:#879a39
    --color=border:#ad8301,header:#FFFCF0,gutter:#100F0F
    --color=spinner:#205ea6,info:#205ea6,separator:#1C1B1A
    --color=pointer:#AD8301,scrollbar:#AF3029,prompt:#AD8301"
#gtk
#___both can be useful on old screens
#export GSK_RENDERER='gl'
#export GSK_DEBUG='gl-no-fractional'

# ZOXIDE
export _ZO_ECHO=1

# RANGER
export RANGER_LOAD_DEFAULT_RC=false

# OLLAMA
if [ "$(hostnamectl hostname)" = "karjala" ]; then
    export OLLAMA_MODELS="/mnt/SSD/ollama_models"
fi
export OLLAMA_KEEP_ALIVE="10m" #default is 5m

#TODO: Move everything related to aichat to the .env file in config (as per 0.20)
export AICHAT_CONFIG_DIR="$XDG_CONFIG_HOME/aichat" #Customize the location of the config dir. Defaults to <user_config_dir>/aichat.

export AICHAT_CONFIG_FILE="$AICHAT_CONFIG_DIR/config.yaml" #Customize the location of the config.yaml file.
export AICHAT_FUNCTIONS_DIR="$AICHAT_CONFIG_DIR/functions" #Customize the location of the functions dir.
export AICHAT_ROLES_FILE="$AICHAT_CONFIG_DIR/roles.yaml" #Customize the location of the roles.yaml file.
export AICHAT_AGENTS_FUNCTIONS_DIR="$AICHAT_CONFIG_DIR/functions/agents" #Customize the location of the functions/agents dir.
export AICHAT_AGENTS_CONFIG_DIR="$AICHAT_CONFIG_DIR/agents" #Customize the location of the agents dir.

mkdir -p "$XDG_DATA_HOME/aichat"
mkdir -p "$XDG_DATA_HOME/aichat/rags"
mkdir -p "$XDG_DATA_HOME/aichat/sessions"
export AICHAT_MESSAGES_FILE="$XDG_DATA_HOME/aichat/messages.md" #Customize the location of the messages.md file.
export AICHAT_SESSIONS_DIR="$XDG_DATA_HOME/aichat/sessions" #Customize the location of the sessions dir.
export AICHAT_RAGS_DIR="$XDG_DATA_HOME/aichat/rags" #Customize the location of the rags dir.
#end of TODO:

if [ -z "${LOADED_PASS_SECRET_ENV}" ]; then
    export LOADED_PASS_SECRET_ENV=1
    export SPOTIFY_CLIENT_SECRET="$(pass ENV/SPOTIFY_CLIENT_SECRET)"
    export ANTHROPIC_API_KEY="$(pass ENV/ANTHROPIC_API_KEY)"
    export GEMINI_API_KEY="$(pass ENV/GEMINI_API_KEY)"
    export OPENAI_API_KEY="$(pass ENV/OPENAI_API_KEY)"
    export PERPLEXITY_API_KEY="$(pass ENV/PERPLEXITY_API_KEY)"
    export MISTRAL_API_KEY="$(pass ENV/MISTRAL_API_KEY)"
    export CLAUDE_API_KEY="$(pass ENV/CLAUDE_API_KEY)"
    clear
    fastfetch
fi
